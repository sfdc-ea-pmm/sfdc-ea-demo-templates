{
  "name" : "Opportunity_Changes_tp",
  "label" : "Opportunity Changes",
  "folder" : {
    "id" : "${App.Folder.Id}"
  },
  "dateVersion" : 1,
  "mobileDisabled" : false,
  "xmd" : {
    "measures" : [
      {
        "conditionalFormatting" : {
          "color" : {
            "referenceField" : "C",
            "type" : "raw",
            "parameters" : { }
          }
        },
        "field" : "Opportunity_Changes__1.A",
        "format" : {
          "delimiters" : { }
        }
      },
      {
        "conditionalFormatting" : {
          "color" : {
            "referenceField" : "color",
            "type" : "raw",
            "parameters" : { }
          }
        },
        "field" : "Opportunity_Changes__1.change",
        "format" : {
          "delimiters" : { }
        }
      },
      {
        "conditionalFormatting" : {
          "color" : {
            "referenceField" : "color",
            "type" : "raw",
            "parameters" : { }
          }
        },
        "field" : "Opportunity_Changes_1.Change",
        "format" : {
          "delimiters" : { }
        }
      },
      {
        "conditionalFormatting" : {
          "color" : {
            "referenceField" : "color",
            "type" : "raw",
            "parameters" : { }
          }
        },
        "field" : "Forecast_Opportuniti_1.New Close Date",
        "format" : {
          "delimiters" : { }
        }
      }
    ],
    "derivedDimensions" : [ ],
    "organizations" : [ ],
    "showDetailsDefaultFields" : [ ],
    "dates" : [ ],
    "derivedMeasures" : [ ],
    "dimensions" : [
      {
        "recordDisplayFields" : [ ],
        "conditionalFormatting" : {
          "color" : {
            "referenceField" : "color",
            "type" : "raw",
            "parameters" : { }
          }
        },
        "salesforceActions" : [ ],
        "field" : "Opportunity_Changes__1.arrow",
        "members" : [ ],
        "customActions" : [ ]
      },
      {
        "recordDisplayFields" : [ ],
        "conditionalFormatting" : {
          "color" : {
            "referenceField" : "color",
            "type" : "raw",
            "parameters" : { }
          }
        },
        "salesforceActions" : [ ],
        "field" : "Opportunity_Changes_1.Change",
        "members" : [ ],
        "customActions" : [ ]
      },
      {
        "recordDisplayFields" : [ ],
        "conditionalFormatting" : { },
        "defaultAction" : "openActionsMenu",
        "salesforceActions" : [ ],
        "field" : "Opportunity_Changes_1.Opp.Name",
        "members" : [ ],
        "customActions" : [ ]
      },
      {
        "recordDisplayFields" : [ ],
        "conditionalFormatting" : {
          "color" : {
            "referenceField" : "color",
            "type" : "raw",
            "parameters" : { }
          }
        },
        "salesforceActions" : [ ],
        "field" : "Close_Date_Opportuni_1.New Close Date",
        "members" : [ ],
        "customActions" : [ ]
      },
      {
        "recordDisplayFields" : [ ],
        "conditionalFormatting" : { },
        "defaultAction" : "openActionsMenu",
        "salesforceActions" : [ ],
        "field" : "Close_Date_Opportuni_1.Opp.Name",
        "members" : [ ],
        "customActions" : [ ]
      },
      {
        "recordDisplayFields" : [ ],
        "conditionalFormatting" : { },
        "defaultAction" : "openActionsMenu",
        "salesforceActions" : [ ],
        "field" : "Forecast_Opportuniti_1.Opp.Name",
        "members" : [ ],
        "customActions" : [ ]
      },
      {
        "recordDisplayFields" : [ ],
        "conditionalFormatting" : {
          "color" : {
            "referenceField" : "color",
            "type" : "raw",
            "parameters" : { }
          }
        },
        "salesforceActions" : [ ],
        "field" : "Forecast_Opportuniti_1.New Close Date",
        "members" : [ ],
        "customActions" : [ ]
      },
      {
        "recordDisplayFields" : [ ],
        "conditionalFormatting" : { },
        "defaultAction" : "openActionsMenu",
        "salesforceActions" : [ ],
        "field" : "lost_opportunties_1.Name",
        "members" : [ ],
        "customActions" : [ ]
      },
      {
        "recordDisplayFields" : [ ],
        "conditionalFormatting" : { },
        "defaultAction" : "openActionsMenu",
        "salesforceActions" : [ ],
        "field" : "new_opportunities_1.Name",
        "members" : [ ],
        "customActions" : [ ]
      }
    ]
  },
  "state" : {
    "dataSourceLinks" : [ ],
    "filters" : [ ],
    "gridLayouts" : [
      {
        "maxWidth" : 400,
        "name" : "Default",
        "numColumns" : 50,
        "pages" : [
          {
            "label" : "amount",
            "name" : "0d1b479c-275a-4574-9899-3aa22f541801",
            "navigationHidden" : false,
            "widgets" : [
              {
                "colspan" : 38,
                "column" : 1,
                "name" : "text_4",
                "row" : 1,
                "rowspan" : 3,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              },
              {
                "colspan" : 8,
                "column" : 8,
                "name" : "link_1",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              },
              {
                "colspan" : 13,
                "column" : 16,
                "name" : "link_2",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "backgroundColor" : "#FFFFFF",
                  "borderColor" : "#E6ECF2",
                  "borderEdges" : [ ],
                  "borderRadius" : 0,
                  "borderWidth" : 1
                }
              },
              {
                "colspan" : 7,
                "column" : 1,
                "name" : "text_6",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "backgroundColor" : "#FFFFFF",
                  "borderColor" : "rgb(21, 137, 238)",
                  "borderEdges" : [
                    "bottom"
                  ],
                  "borderRadius" : 0,
                  "borderWidth" : 2
                }
              },
              {
                "colspan" : 40,
                "column" : 0,
                "name" : "container_1",
                "row" : 8,
                "rowspan" : 25,
                "widgetStyle" : {
                  "backgroundColor" : "#FFFFFF",
                  "borderColor" : "rgb(201, 201, 201)",
                  "borderEdges" : [
                    "top"
                  ],
                  "borderRadius" : 0,
                  "borderWidth" : 1
                }
              },
              {
                "colspan" : 35,
                "column" : 4,
                "name" : "text_1",
                "row" : 30,
                "rowspan" : 3,
                "widgetStyle" : {
                  "backgroundColor" : "#FFFFFF",
                  "borderColor" : "#FFFFFF",
                  "borderEdges" : [
                    "right"
                  ],
                  "borderRadius" : 0,
                  "borderWidth" : 4
                }
              },
              {
                "colspan" : 5,
                "column" : 29,
                "name" : "link_6",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              },
              {
                "colspan" : 5,
                "column" : 34,
                "name" : "link_8",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              },
              {
                "colspan" : 38,
                "column" : 1,
                "name" : "table_1",
                "row" : 9,
                "rowspan" : 20,
                "widgetStyle" : {
                  "backgroundColor" : "#FFFFFF",
                  "borderColor" : "#E6ECF2",
                  "borderEdges" : [ ],
                  "borderRadius" : 0,
                  "borderWidth" : 1
                }
              }
            ]
          },
          {
            "label" : "close_date",
            "name" : "0446deaf-d1c9-4317-80cb-d09135514514",
            "navigationHidden" : false,
            "widgets" : [
              {
                "colspan" : 13,
                "column" : 16,
                "name" : "link_2",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "backgroundColor" : "#FFFFFF",
                  "borderColor" : "#E6ECF2",
                  "borderEdges" : [ ],
                  "borderRadius" : 0,
                  "borderWidth" : 1
                }
              },
              {
                "colspan" : 40,
                "column" : 0,
                "name" : "container_1",
                "row" : 8,
                "rowspan" : 32,
                "widgetStyle" : {
                  "backgroundColor" : "#FFFFFF",
                  "borderColor" : "rgb(201, 201, 201)",
                  "borderEdges" : [
                    "top"
                  ],
                  "borderRadius" : 0,
                  "borderWidth" : 1
                }
              },
              {
                "colspan" : 38,
                "column" : 1,
                "name" : "text_4",
                "row" : 1,
                "rowspan" : 3,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              },
              {
                "colspan" : 8,
                "column" : 8,
                "name" : "text_3",
                "row" : 4,
                "rowspan" : 4,
                "widgetStyle" : {
                  "backgroundColor" : "#FFFFFF",
                  "borderColor" : "rgb(21, 137, 238)",
                  "borderEdges" : [
                    "bottom"
                  ],
                  "borderRadius" : 0,
                  "borderWidth" : 2
                }
              },
              {
                "colspan" : 7,
                "column" : 1,
                "name" : "link_3",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              },
              {
                "colspan" : 5,
                "column" : 29,
                "name" : "link_6",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              },
              {
                "colspan" : 5,
                "column" : 34,
                "name" : "link_8",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              },
              {
                "colspan" : 38,
                "column" : 1,
                "name" : "table_4",
                "row" : 9,
                "rowspan" : 20,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              }
            ]
          },
          {
            "label" : "forecast_category",
            "name" : "63dea40e-3e79-443f-a957-3f9f210b72a8",
            "navigationHidden" : false,
            "widgets" : [
              {
                "colspan" : 8,
                "column" : 8,
                "name" : "link_1",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              },
              {
                "colspan" : 40,
                "column" : 0,
                "name" : "container_1",
                "row" : 8,
                "rowspan" : 25,
                "widgetStyle" : {
                  "backgroundColor" : "#FFFFFF",
                  "borderColor" : "rgb(201, 201, 201)",
                  "borderEdges" : [
                    "top"
                  ],
                  "borderRadius" : 0,
                  "borderWidth" : 1
                }
              },
              {
                "colspan" : 38,
                "column" : 1,
                "name" : "text_4",
                "row" : 1,
                "rowspan" : 3,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              },
              {
                "colspan" : 13,
                "column" : 16,
                "name" : "text_5",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "backgroundColor" : "#FFFFFF",
                  "borderColor" : "rgb(21, 137, 238)",
                  "borderEdges" : [
                    "bottom"
                  ],
                  "borderRadius" : 0,
                  "borderWidth" : 2
                }
              },
              {
                "colspan" : 7,
                "column" : 1,
                "name" : "link_3",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              },
              {
                "colspan" : 5,
                "column" : 29,
                "name" : "link_6",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              },
              {
                "colspan" : 5,
                "column" : 34,
                "name" : "link_8",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              },
              {
                "colspan" : 38,
                "column" : 1,
                "name" : "table_5",
                "row" : 9,
                "rowspan" : 20,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              }
            ]
          },
          {
            "label" : "new",
            "name" : "6e5c648e-31c4-40a8-9322-a93c4713a4d6",
            "navigationHidden" : false,
            "widgets" : [
              {
                "colspan" : 38,
                "column" : 1,
                "name" : "text_4",
                "row" : 1,
                "rowspan" : 3,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              },
              {
                "colspan" : 13,
                "column" : 16,
                "name" : "link_2",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "backgroundColor" : "#FFFFFF",
                  "borderColor" : "#E6ECF2",
                  "borderEdges" : [ ],
                  "borderRadius" : 0,
                  "borderWidth" : 1
                }
              },
              {
                "colspan" : 8,
                "column" : 8,
                "name" : "link_1",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              },
              {
                "colspan" : 5,
                "column" : 34,
                "name" : "link_8",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              },
              {
                "colspan" : 40,
                "column" : 0,
                "name" : "container_1",
                "row" : 8,
                "rowspan" : 25,
                "widgetStyle" : {
                  "backgroundColor" : "#FFFFFF",
                  "borderColor" : "rgb(201, 201, 201)",
                  "borderEdges" : [
                    "top"
                  ],
                  "borderRadius" : 0,
                  "borderWidth" : 1
                }
              },
              {
                "colspan" : 7,
                "column" : 1,
                "name" : "link_3",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              },
              {
                "colspan" : 5,
                "column" : 29,
                "name" : "text_2",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "backgroundColor" : "#FFFFFF",
                  "borderColor" : "rgb(21, 137, 238)",
                  "borderEdges" : [
                    "bottom"
                  ],
                  "borderRadius" : 0,
                  "borderWidth" : 2
                }
              },
              {
                "colspan" : 38,
                "column" : 1,
                "name" : "table_3",
                "row" : 9,
                "rowspan" : 20,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              }
            ]
          },
          {
            "label" : "lost",
            "name" : "2ee7d738-3005-4b5d-99bb-e015643bfdd3",
            "navigationHidden" : false,
            "widgets" : [
              {
                "colspan" : 38,
                "column" : 1,
                "name" : "text_4",
                "row" : 1,
                "rowspan" : 3,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              },
              {
                "colspan" : 13,
                "column" : 16,
                "name" : "link_2",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "backgroundColor" : "#FFFFFF",
                  "borderColor" : "#E6ECF2",
                  "borderEdges" : [ ],
                  "borderRadius" : 0,
                  "borderWidth" : 1
                }
              },
              {
                "colspan" : 8,
                "column" : 8,
                "name" : "link_1",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              },
              {
                "colspan" : 5,
                "column" : 29,
                "name" : "link_6",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              },
              {
                "colspan" : 40,
                "column" : 0,
                "name" : "container_1",
                "row" : 8,
                "rowspan" : 25,
                "widgetStyle" : {
                  "backgroundColor" : "#FFFFFF",
                  "borderColor" : "rgb(201, 201, 201)",
                  "borderEdges" : [
                    "top"
                  ],
                  "borderRadius" : 0,
                  "borderWidth" : 1
                }
              },
              {
                "colspan" : 7,
                "column" : 1,
                "name" : "link_3",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              },
              {
                "colspan" : 4,
                "column" : 34,
                "name" : "text_10",
                "row" : 5,
                "rowspan" : 3,
                "widgetStyle" : {
                  "backgroundColor" : "#FFFFFF",
                  "borderColor" : "rgb(21, 137, 238)",
                  "borderEdges" : [
                    "bottom"
                  ],
                  "borderRadius" : 0,
                  "borderWidth" : 2
                }
              },
              {
                "colspan" : 38,
                "column" : 1,
                "name" : "table_2",
                "row" : 9,
                "rowspan" : 20,
                "widgetStyle" : {
                  "borderEdges" : [ ]
                }
              }
            ]
          }
        ],
        "rowHeight" : "fine",
        "selectors" : [
          "maxWidth(400)"
        ],
        "style" : {
          "alignmentX" : "left",
          "alignmentY" : "top",
          "backgroundColor" : "#FFFFFF",
          "cellSpacingX" : 0,
          "cellSpacingY" : 0,
          "fit" : "original",
          "gutterColor" : "#C5D3E0"
        },
        "version" : 1.0
      }
    ],
    "layouts" : [ ],
    "steps" : {
      "Forecast_Opportuniti_1" : {
        "broadcastFacet" : false,
        "groups" : [ ],
        "label" : "Forecast_Opportunities",
        "numbers" : [ ],
        "query" : "q = load \"${App.Datasets.OpportunityHistory.FullyQualifiedName}\";\nq = filter q by 'Opp.IsClosed' == \"false\";\na = filter q by date('ValidFromDate_Year', 'ValidFromDate_Month', 'ValidFromDate_Day') in [..\"8 days ago\"]; \na = filter a by date('ValidToDate_Year', 'ValidToDate_Month', 'ValidToDate_Day') in [\"7 days ago\"..];\nb = filter q by date('ValidFromDate_Year', 'ValidFromDate_Month', 'ValidFromDate_Day') in [..\"current day\"];\nb = filter b by date('ValidToDate_Year', 'ValidToDate_Month', 'ValidToDate_Day') in [\"1 day ahead\"..];\nc = group a by 'OpportunityId' full, b by 'OpportunityId';\nc = foreach c generate a['OpportunityId'] as 'OpportunityId', first(a['Opp.Name']) as 'Opp.Name', first(a['ForecastCategory']) as 'Previous', first(b['ForecastCategory']) as 'Current';\n-- daysBetween(toDate(first(a['CloseDate_sec_epoch'])), toDate(first(b['CloseDate_sec_epoch'])) ) as 'diff';\nc = filter c by 'Previous' != 'Current';\nc = foreach c generate 'OpportunityId', 'Opp.Name', 'Previous', 'Current';\n--  case when 'diff' < 0 then 'New Close Date' + \" ◀\" else 'New Close Date' + \" ▶\" end as 'New Close Date', 'diff', case when diff < 0 then \"#2E844A\" else \"#BA0517\" end as 'color';\n-- c = order c by 'diff' asc;\nc = limit c 50;",
        "receiveFacetSource" : {
          "mode" : "all",
          "steps" : [ ]
        },
        "selectMode" : "none",
        "strings" : [ ],
        "type" : "saql",
        "useGlobal" : true,
        "visualizationParameters" : {
          "parameters" : {
            "borderColor" : "#FFFFFF",
            "borderWidth" : 1,
            "cell" : {
              "backgroundColor" : "#ffffff",
              "fontColor" : "#16325c",
              "fontSize" : 12,
              "textWrap" : false
            },
            "columnProperties" : { },
            "columns" : [
              "Opp.Name",
              "Previous",
              "Current"
            ],
            "customBulkActions" : [ ],
            "header" : {
              "backgroundColor" : "#FFFFFF",
              "fontColor" : "#16325c",
              "fontSize" : 11,
              "textWrap" : false
            },
            "innerMajorBorderColor" : "#FFFFFF",
            "innerMinorBorderColor" : "#FFFFFF",
            "mode" : "fittocontainer",
            "numberOfLines" : 1,
            "showActionMenu" : true,
            "showRowIndexColumn" : false,
            "verticalPadding" : 4
          },
          "type" : "table"
        }
      },
      "Opportunity_Changes__1" : {
        "broadcastFacet" : true,
        "groups" : [ ],
        "label" : "Opportunity_Changes_Total",
        "numbers" : [ ],
        "query" : "q = load \"${App.Datasets.OpportunityHistory.FullyQualifiedName}\";\na = filter q by date('ValidFromDate_Year', 'ValidFromDate_Month', 'ValidFromDate_Day') in [..\"8 days ago\"]; \na = filter a by date('ValidToDate_Year', 'ValidToDate_Month', 'ValidToDate_Day') in [\"7 days ago\"..];\nb = filter q by date('ValidFromDate_Year', 'ValidFromDate_Month', 'ValidFromDate_Day') in [..\"current day\"];\nb = filter b by date('ValidToDate_Year', 'ValidToDate_Month', 'ValidToDate_Day') in [\"1 day ahead\"..];\nc = group a by 'OpportunityId' full, b by 'OpportunityId';\nc = foreach c generate a['OpportunityId'] as 'OpportunityId', sum(b['Amount']) - sum(a['Amount']) as 'change';\nc = group c by all;\nc = foreach c generate sum('change') as 'change', case when sum('change') < 0 then \"▼\" else \"▲\" end as 'arrow', case when sum('change') < 0 then \"#BA0517\" else \"#2E844A\" end as 'color';",
        "receiveFacetSource" : {
          "mode" : "all",
          "steps" : [ ]
        },
        "selectMode" : "none",
        "strings" : [ ],
        "type" : "saql",
        "useGlobal" : true,
        "visualizationParameters" : {
          "parameters" : {
            "borderColor" : "#e0e5ee",
            "borderWidth" : 1,
            "cell" : {
              "backgroundColor" : "#ffffff",
              "fontColor" : "#16325c",
              "fontSize" : 12,
              "textWrap" : true
            },
            "columnProperties" : { },
            "columns" : [ ],
            "customBulkActions" : [ ],
            "header" : {
              "backgroundColor" : "#f4f6f9",
              "fontColor" : "#16325c",
              "fontSize" : 12,
              "textWrap" : true
            },
            "innerMajorBorderColor" : "#a8b7c7",
            "innerMinorBorderColor" : "#e0e5ee",
            "maxColumnWidth" : 300,
            "minColumnWidth" : 40,
            "mode" : "variable",
            "numberOfLines" : 1,
            "showActionMenu" : true,
            "showRowIndexColumn" : false,
            "totals" : true,
            "verticalPadding" : 8
          },
          "type" : "table"
        }
      },
      "lost_opportunties_1" : {
        "broadcastFacet" : false,
        "groups" : [ ],
        "label" : "lost_opportunties",
        "numbers" : [ ],
        "query" : "q = load \"${App.Datasets.opportunity_revinsights.FullyQualifiedName}\"; q = filter q by date('CloseDate_Year', 'CloseDate_Month', 'CloseDate_Day') in [\"7 days ago\"..\"current day\"];  \nq = filter q by 'IsClosed'== \"true\" && 'IsWon' == \"false\";\nq = group q by 'Id';\nresult = foreach q generate 'Id', first('Name') as 'Name', sum('Amount') as 'Amount';\nresult = order result by ('Amount' desc nulls last);\nresult = limit result 50;",
        "receiveFacetSource" : {
          "mode" : "all",
          "steps" : [ ]
        },
        "selectMode" : "single",
        "strings" : [ ],
        "type" : "saql",
        "useGlobal" : true,
        "visualizationParameters" : {
          "parameters" : {
            "borderColor" : "#FFFFFF",
            "borderWidth" : 1,
            "cell" : {
              "backgroundColor" : "#ffffff",
              "fontColor" : "#16325c",
              "fontSize" : 12,
              "textWrap" : false
            },
            "columnProperties" : {
              "A" : {
                "parameters" : {
                  "alignment" : "left",
                  "styles" : {
                    "linkColor" : "#006dcc"
                  }
                },
                "type" : "text"
              },
              "B" : {
                "parameters" : {
                  "alignment" : "right",
                  "styles" : {
                    "bold" : true
                  }
                },
                "type" : "text"
              },
              "Amount" : {
                "parameters" : {
                  "alignment" : "right",
                  "styles" : {
                    "bold" : true
                  }
                },
                "type" : "text"
              }
            },
            "columns" : [
              "Name",
              "Amount"
            ],
            "customBulkActions" : [ ],
            "header" : {
              "backgroundColor" : "#FFFFFF",
              "fontColor" : "#7D98B3",
              "fontSize" : 11,
              "textWrap" : false
            },
            "innerMajorBorderColor" : "#FFFFFF",
            "innerMinorBorderColor" : "#FFFFFF",
            "mode" : "fittocontainer",
            "numberOfLines" : 1,
            "showActionMenu" : true,
            "showRowIndexColumn" : false,
            "totals" : true,
            "verticalPadding" : 4
          },
          "type" : "table"
        }
      },
      "new_opportunities_1" : {
        "broadcastFacet" : false,
        "groups" : [ ],
        "label" : "new_opportunities",
        "numbers" : [ ],
        "query" : "q = load \"${App.Datasets.opportunity_revinsights.FullyQualifiedName}\";\nq = filter q by 'IsClosed' == \"false\";\nq = filter q by date('CreatedDate_Year', 'CreatedDate_Month', 'CreatedDate_Day') in [\"7 days ago\"..\"current day\"];\nq = group q by 'Id';\nq = foreach q generate 'Id', first('Name') as 'Name', sum('Amount') as 'Amount';\nq = order q by 'Amount' desc nulls last;\nq = limit q 50;",
        "receiveFacetSource" : {
          "mode" : "all",
          "steps" : [ ]
        },
        "selectMode" : "single",
        "strings" : [ ],
        "type" : "saql",
        "useGlobal" : true,
        "visualizationParameters" : {
          "parameters" : {
            "borderColor" : "#FFFFFF",
            "borderWidth" : 1,
            "cell" : {
              "backgroundColor" : "#ffffff",
              "fontColor" : "#16325c",
              "fontSize" : 12,
              "textWrap" : false
            },
            "columnProperties" : {
              "A" : {
                "parameters" : {
                  "alignment" : "left",
                  "styles" : {
                    "linkColor" : "#006dcc"
                  }
                },
                "type" : "text"
              },
              "B" : {
                "parameters" : {
                  "alignment" : "right",
                  "styles" : {
                    "bold" : true
                  }
                },
                "type" : "text"
              },
              "Amount" : {
                "parameters" : {
                  "alignment" : "right",
                  "styles" : {
                    "bold" : true
                  }
                },
                "type" : "text"
              }
            },
            "columns" : [
              "Name",
              "Amount"
            ],
            "customBulkActions" : [ ],
            "header" : {
              "backgroundColor" : "#FFFFFF",
              "fontColor" : "#7D98B3",
              "fontSize" : 11,
              "textWrap" : false
            },
            "innerMajorBorderColor" : "#FFFFFF",
            "innerMinorBorderColor" : "#FFFFFF",
            "mode" : "fittocontainer",
            "numberOfLines" : 1,
            "showActionMenu" : false,
            "showRowIndexColumn" : false,
            "totals" : true,
            "verticalPadding" : 4
          },
          "type" : "table"
        }
      },
      "Opportunity_Changes_1" : {
        "broadcastFacet" : false,
        "groups" : [ ],
        "label" : "Opportunity_Changes",
        "numbers" : [ ],
        "query" : "q = load \"${App.Datasets.OpportunityHistory.FullyQualifiedName}\";\na = filter q by date('ValidFromDate_Year', 'ValidFromDate_Month', 'ValidFromDate_Day') in [..\"8 days ago\"]; \na = filter a by date('ValidToDate_Year', 'ValidToDate_Month', 'ValidToDate_Day') in [\"7 days ago\"..];\nb = filter q by date('ValidFromDate_Year', 'ValidFromDate_Month', 'ValidFromDate_Day') in [..\"current day\"];\nb = filter b by date('ValidToDate_Year', 'ValidToDate_Month', 'ValidToDate_Day') in [\"1 day ahead\"..];\nc = group a by 'OpportunityId' full, b by 'OpportunityId';\nc = foreach c generate a['OpportunityId'] as 'OpportunityId', first(a['Opp.Name']) as 'Opp.Name', sum(a['Amount']) as 'sum_Amount_7_days_ago', sum(b['Amount']) as 'Amount', sum(b['Amount']) - sum(a['Amount']) as 'diff';\nc = filter c by 'diff' != 0;\nc = foreach c generate 'OpportunityId', 'Opp.Name', 'sum_Amount_7_days_ago', 'Amount', 'diff', case when 'diff' < 0 then number_to_string('diff',\"$#,###\") + \" ▼\" else number_to_string('diff',\"$#,###\") + \" ▲\" end as 'Change', case when diff < 0 then \"#BA0517\" else \"#2E844A\" end as 'color';\nc = order c by 'diff' asc;\nc = limit c 50;",
        "receiveFacetSource" : {
          "mode" : "all",
          "steps" : [ ]
        },
        "selectMode" : "none",
        "strings" : [ ],
        "type" : "saql",
        "useGlobal" : true,
        "visualizationParameters" : {
          "parameters" : {
            "borderColor" : "#FFFFFF",
            "borderWidth" : 1,
            "cell" : {
              "backgroundColor" : "#ffffff",
              "fontColor" : "#16325c",
              "fontSize" : 12,
              "textWrap" : true
            },
            "collapsible" : false,
            "columnProperties" : {
              " " : {
                "parameters" : {
                  "alignment" : "right"
                },
                "type" : "text"
              },
              "C" : {
                "parameters" : {
                  "alignment" : "right",
                  "styles" : {
                    "bold" : true
                  }
                },
                "type" : "text"
              },
              "E" : {
                "parameters" : {
                  "alignment" : "right",
                  "styles" : {
                    "bold" : true
                  }
                },
                "type" : "text"
              },
              "Amount" : {
                "parameters" : {
                  "alignment" : "right",
                  "styles" : {
                    "bold" : true
                  }
                },
                "type" : "text"
              },
              "Change" : {
                "parameters" : {
                  "alignment" : "right",
                  "styles" : {
                    "bold" : true
                  }
                },
                "type" : "text"
              }
            },
            "columns" : [
              "Opp.Name",
              "Amount",
              "Change"
            ],
            "customBulkActions" : [ ],
            "header" : {
              "backgroundColor" : "#FFFFFF",
              "fontColor" : "#7D98B3",
              "fontSize" : 11,
              "textWrap" : true
            },
            "innerMajorBorderColor" : "#FFFFFF",
            "innerMinorBorderColor" : "#FFFFFF",
            "mode" : "fittocontainer",
            "numberOfLines" : 1,
            "showActionMenu" : false,
            "showRowIndexColumn" : false,
            "totals" : true,
            "verticalPadding" : 4
          },
          "type" : "table"
        }
      },
      "Close_Date_Opportuni_1" : {
        "broadcastFacet" : false,
        "groups" : [ ],
        "label" : "Close_Date_Opportunities",
        "numbers" : [ ],
        "query" : "q = load \"${App.Datasets.OpportunityHistory.FullyQualifiedName}\";\na = filter q by date('ValidFromDate_Year', 'ValidFromDate_Month', 'ValidFromDate_Day') in [..\"8 days ago\"]; \na = filter a by date('ValidToDate_Year', 'ValidToDate_Month', 'ValidToDate_Day') in [\"7 days ago\"..];\nb = filter q by date('ValidFromDate_Year', 'ValidFromDate_Month', 'ValidFromDate_Day') in [..\"current day\"];\nb = filter b by date('ValidToDate_Year', 'ValidToDate_Month', 'ValidToDate_Day') in [\"1 day ahead\"..];\nc = group a by 'OpportunityId' full, b by 'OpportunityId';\nc = foreach c generate a['OpportunityId'] as 'OpportunityId', first(a['Opp.Name']) as 'Opp.Name', first(a['CloseDate']) as 'Old Close Date', first(b['CloseDate']) as 'New Close Date', \ndaysBetween(toDate(first(a['CloseDate_sec_epoch'])), toDate(first(b['CloseDate_sec_epoch'])) ) as 'diff';\nc = filter c by 'diff' != 0;\nc = foreach c generate 'OpportunityId', 'Opp.Name', 'Old Close Date', case when 'diff' < 0 then 'New Close Date' + \" ◀\" else 'New Close Date' + \" ▶\" end as 'New Close Date', 'diff', case when diff < 0 then \"#2E844A\" else \"#BA0517\" end as 'color';\nc = order c by 'diff' asc;\nc = limit c 50;",
        "receiveFacetSource" : {
          "mode" : "all",
          "steps" : [ ]
        },
        "selectMode" : "none",
        "strings" : [ ],
        "type" : "saql",
        "useGlobal" : true,
        "visualizationParameters" : {
          "parameters" : {
            "borderColor" : "#FFFFFF",
            "borderWidth" : 1,
            "cell" : {
              "backgroundColor" : "#ffffff",
              "fontColor" : "#16325c",
              "fontSize" : 12,
              "textWrap" : false
            },
            "columnProperties" : { },
            "columns" : [
              "Opp.Name",
              "Old Close Date",
              "New Close Date"
            ],
            "customBulkActions" : [ ],
            "header" : {
              "backgroundColor" : "#FFFFFF",
              "fontColor" : "#7D98B3",
              "fontSize" : 11,
              "textWrap" : false
            },
            "innerMajorBorderColor" : "#FFFFFF",
            "innerMinorBorderColor" : "#FFFFFF",
            "mode" : "fittocontainer",
            "numberOfLines" : 1,
            "showActionMenu" : true,
            "showRowIndexColumn" : false,
            "totals" : true,
            "verticalPadding" : 4
          },
          "type" : "table"
        }
      }
    },
    "widgetStyle" : {
      "backgroundColor" : "#FFFFFF",
      "borderColor" : "#E6ECF2",
      "borderEdges" : [ ],
      "borderRadius" : 0,
      "borderWidth" : 1
    },
    "widgets" : {
      "text_1" : {
        "parameters" : {
          "content" : {
            "richTextContent" : [
              {
                "attributes" : {
                  "color" : "#444444",
                  "size" : "12px"
                },
                "insert" : "Net change last 7 days    "
              },
              {
                "attributes" : {
                  "color" : "#181818",
                  "size" : "12px",
                  "bold" : true
                },
                "insert" : "[change]"
              },
              {
                "attributes" : {
                  "align" : "right"
                },
                "insert" : "\n"
              }
            ],
            "values" : {
              "change" : {
                "field" : "change",
                "sourceType" : "result",
                "step" : "Opportunity_Changes__1"
              }
            }
          },
          "showActionMenu" : false
        },
        "type" : "text"
      },
      "link_3" : {
        "parameters" : {
          "destinationLink" : {
            "name" : "0d1b479c-275a-4574-9899-3aa22f541801"
          },
          "destinationType" : "page",
          "fontSize" : 12,
          "includeState" : false,
          "text" : "Amount",
          "textAlignment" : "left",
          "textColor" : "#091A3E"
        },
        "type" : "link"
      },
      "link_1" : {
        "parameters" : {
          "destinationLink" : {
            "name" : "0446deaf-d1c9-4317-80cb-d09135514514"
          },
          "destinationType" : "page",
          "fontSize" : 12,
          "includeState" : false,
          "text" : "Close Date",
          "textAlignment" : "center",
          "textColor" : "rgb(24, 24, 24)"
        },
        "type" : "link"
      },
      "link_2" : {
        "parameters" : {
          "destinationLink" : {
            "name" : "63dea40e-3e79-443f-a957-3f9f210b72a8"
          },
          "destinationType" : "page",
          "fontSize" : 12,
          "includeState" : false,
          "text" : "Forecast Category",
          "textAlignment" : "center",
          "textColor" : "rgb(24, 24, 24)"
        },
        "type" : "link"
      },
      "text_10" : {
        "parameters" : {
          "content" : {
            "richTextContent" : [
              {
                "attributes" : {
                  "size" : "12px",
                  "bold" : true
                },
                "insert" : "Lost"
              },
              {
                "attributes" : {
                  "align" : "left"
                },
                "insert" : "\n"
              }
            ]
          },
          "showActionMenu" : false,
          "tooltip" : "Closed Lost Opportunities in the last seven days"
        },
        "type" : "text"
      },
      "table_1" : {
        "parameters" : {
          "borderColor" : "#FFFFFF",
          "borderWidth" : 1,
          "cell" : {
            "backgroundColor" : "#ffffff",
            "fontColor" : "#16325c",
            "fontSize" : 12,
            "textWrap" : false
          },
          "collapsible" : false,
          "columnProperties" : {
            " " : {
              "parameters" : {
                "alignment" : "right"
              },
              "type" : "text"
            },
            "C" : {
              "parameters" : {
                "alignment" : "right",
                "styles" : {
                  "bold" : true
                }
              },
              "type" : "text"
            },
            "E" : {
              "parameters" : {
                "alignment" : "right",
                "styles" : {
                  "bold" : true
                }
              },
              "type" : "text"
            },
            "Amount" : {
              "parameters" : {
                "alignment" : "right",
                "styles" : {
                  "bold" : true
                }
              },
              "type" : "text"
            },
            "Change" : {
              "parameters" : {
                "alignment" : "right",
                "styles" : {
                  "bold" : true
                }
              },
              "type" : "text"
            }
          },
          "columns" : [
            "Opp.Name",
            "Amount",
            "Change"
          ],
          "customBulkActions" : [ ],
          "exploreLink" : true,
          "header" : {
            "backgroundColor" : "#FFFFFF",
            "fontColor" : "#7D98B3",
            "fontSize" : 11,
            "textWrap" : false
          },
          "innerMajorBorderColor" : "#FFFFFF",
          "innerMinorBorderColor" : "#FFFFFF",
          "mode" : "fittocontainer",
          "numberOfLines" : 1,
          "pivoted" : false,
          "showActionMenu" : false,
          "showRowIndexColumn" : false,
          "step" : "Opportunity_Changes_1",
          "totals" : true,
          "verticalPadding" : 4
        },
        "type" : "table"
      },
      "table_2" : {
        "parameters" : {
          "borderColor" : "#FFFFFF",
          "borderWidth" : 1,
          "cell" : {
            "backgroundColor" : "#ffffff",
            "fontColor" : "#16325c",
            "fontSize" : 12,
            "textWrap" : false
          },
          "columnProperties" : {
            "A" : {
              "parameters" : {
                "alignment" : "left",
                "styles" : {
                  "linkColor" : "#006dcc"
                }
              },
              "type" : "text"
            },
            "B" : {
              "parameters" : {
                "alignment" : "right",
                "styles" : {
                  "bold" : true
                }
              },
              "type" : "text"
            },
            "Amount" : {
              "parameters" : {
                "alignment" : "right",
                "styles" : {
                  "bold" : true
                }
              },
              "type" : "text"
            }
          },
          "columns" : [
            "Name",
            "Amount"
          ],
          "customBulkActions" : [ ],
          "exploreLink" : true,
          "header" : {
            "backgroundColor" : "#FFFFFF",
            "fontColor" : "#7D98B3",
            "fontSize" : 11,
            "textWrap" : false
          },
          "innerMajorBorderColor" : "#FFFFFF",
          "innerMinorBorderColor" : "#FFFFFF",
          "mode" : "fittocontainer",
          "numberOfLines" : 1,
          "pivoted" : false,
          "showActionMenu" : false,
          "showRowIndexColumn" : false,
          "step" : "lost_opportunties_1",
          "totals" : true,
          "verticalPadding" : 4
        },
        "type" : "table"
      },
      "table_3" : {
        "parameters" : {
          "borderColor" : "#FFFFFF",
          "borderWidth" : 1,
          "cell" : {
            "backgroundColor" : "#ffffff",
            "fontColor" : "#16325c",
            "fontSize" : 12,
            "textWrap" : false
          },
          "columnProperties" : {
            "A" : {
              "parameters" : {
                "alignment" : "left",
                "styles" : {
                  "linkColor" : "#006dcc"
                }
              },
              "type" : "text"
            },
            "B" : {
              "parameters" : {
                "alignment" : "right",
                "styles" : {
                  "bold" : true
                }
              },
              "type" : "text"
            },
            "Amount" : {
              "parameters" : {
                "alignment" : "right",
                "styles" : {
                  "bold" : true
                }
              },
              "type" : "text"
            }
          },
          "columns" : [
            "Name",
            "Amount"
          ],
          "customBulkActions" : [ ],
          "exploreLink" : true,
          "header" : {
            "backgroundColor" : "#FFFFFF",
            "fontColor" : "#7D98B3",
            "fontSize" : 11,
            "textWrap" : false
          },
          "innerMajorBorderColor" : "#FFFFFF",
          "innerMinorBorderColor" : "#FFFFFF",
          "mode" : "fittocontainer",
          "numberOfLines" : 1,
          "pivoted" : false,
          "showActionMenu" : false,
          "showRowIndexColumn" : false,
          "step" : "new_opportunities_1",
          "totals" : true,
          "verticalPadding" : 4
        },
        "type" : "table"
      },
      "container_1" : {
        "parameters" : {
          "alignmentX" : "left",
          "alignmentY" : "top",
          "fit" : "original"
        },
        "type" : "container"
      },
      "table_4" : {
        "parameters" : {
          "borderColor" : "#FFFFFF",
          "borderWidth" : 1,
          "cell" : {
            "backgroundColor" : "#ffffff",
            "fontColor" : "#16325c",
            "fontSize" : 12,
            "textWrap" : false
          },
          "columnProperties" : { },
          "columns" : [
            "Opp.Name",
            "Old Close Date",
            "New Close Date"
          ],
          "customBulkActions" : [ ],
          "exploreLink" : true,
          "header" : {
            "backgroundColor" : "#FFFFFF",
            "fontColor" : "#7D98B3",
            "fontSize" : 11,
            "textWrap" : false
          },
          "innerMajorBorderColor" : "#FFFFFF",
          "innerMinorBorderColor" : "#FFFFFF",
          "mode" : "fittocontainer",
          "numberOfLines" : 1,
          "pivoted" : false,
          "showActionMenu" : false,
          "showRowIndexColumn" : false,
          "step" : "Close_Date_Opportuni_1",
          "totals" : true,
          "verticalPadding" : 4
        },
        "type" : "table"
      },
      "table_5" : {
        "parameters" : {
          "borderColor" : "#FFFFFF",
          "borderWidth" : 1,
          "cell" : {
            "backgroundColor" : "#ffffff",
            "fontColor" : "#16325c",
            "fontSize" : 12,
            "textWrap" : false
          },
          "columnProperties" : { },
          "columns" : [
            "Opp.Name",
            "Previous",
            "Current"
          ],
          "customBulkActions" : [ ],
          "exploreLink" : true,
          "header" : {
            "backgroundColor" : "#FFFFFF",
            "fontColor" : "#7D98B3",
            "fontSize" : 11,
            "textWrap" : false
          },
          "innerMajorBorderColor" : "#FFFFFF",
          "innerMinorBorderColor" : "#FFFFFF",
          "mode" : "fittocontainer",
          "numberOfLines" : 1,
          "pivoted" : false,
          "showActionMenu" : false,
          "showRowIndexColumn" : false,
          "step" : "Forecast_Opportuniti_1",
          "verticalPadding" : 4
        },
        "type" : "table"
      },
      "link_8" : {
        "parameters" : {
          "destinationLink" : {
            "name" : "2ee7d738-3005-4b5d-99bb-e015643bfdd3"
          },
          "destinationType" : "page",
          "fontSize" : 12,
          "includeState" : false,
          "text" : "Lost",
          "textAlignment" : "center",
          "textColor" : "rgb(24, 24, 24)"
        },
        "type" : "link"
      },
      "link_6" : {
        "parameters" : {
          "destinationLink" : {
            "name" : "6e5c648e-31c4-40a8-9322-a93c4713a4d6"
          },
          "destinationType" : "page",
          "fontSize" : 12,
          "includeState" : false,
          "text" : "New",
          "textAlignment" : "center",
          "textColor" : "rgb(24, 24, 24)"
        },
        "type" : "link"
      },
      "text_3" : {
        "parameters" : {
          "content" : {
            "richTextContent" : [
              {
                "attributes" : {
                  "size" : "12px",
                  "bold" : true
                },
                "insert" : "Close Date"
              },
              {
                "attributes" : {
                  "align" : "center"
                },
                "insert" : "\n"
              }
            ]
          },
          "showActionMenu" : false,
          "tooltip" : "Open Opportunities where the Close Date field has changes in the last seven days"
        },
        "type" : "text"
      },
      "text_2" : {
        "parameters" : {
          "content" : {
            "richTextContent" : [
              {
                "attributes" : {
                  "size" : "12px",
                  "bold" : true
                },
                "insert" : "New"
              },
              {
                "attributes" : {
                  "align" : "left"
                },
                "insert" : "\n"
              }
            ]
          },
          "showActionMenu" : false,
          "tooltip" : "Open Opportunities that have been created in the last seven days"
        },
        "type" : "text"
      },
      "text_5" : {
        "parameters" : {
          "content" : {
            "richTextContent" : [
              {
                "attributes" : {
                  "size" : "12px",
                  "color" : "#181818",
                  "bold" : true
                },
                "insert" : "Forecast Category"
              },
              {
                "attributes" : {
                  "align" : "center"
                },
                "insert" : "\n"
              }
            ]
          },
          "showActionMenu" : false,
          "tooltip" : "Open Opportunities where the Forecast Category field has changes in the last seven days"
        },
        "type" : "text"
      },
      "text_4" : {
        "parameters" : {
          "content" : {
            "richTextContent" : [
              {
                "attributes" : {
                  "color" : "#181818",
                  "size" : "16px",
                  "bold" : true
                },
                "insert" : "Opportunity Changes"
              },
              {
                "attributes" : {
                  "align" : "left"
                },
                "insert" : "\n"
              }
            ]
          },
          "showActionMenu" : false
        },
        "type" : "text"
      },
      "text_6" : {
        "parameters" : {
          "content" : {
            "richTextContent" : [
              {
                "attributes" : {
                  "size" : "12px",
                  "color" : "#181818",
                  "bold" : true
                },
                "insert" : "Amount"
              },
              {
                "attributes" : {
                  "align" : "left"
                },
                "insert" : "\n"
              }
            ]
          },
          "showActionMenu" : false,
          "tooltip" : "Open Opportunities where the Amount field has changes in the last seven days"
        },
        "type" : "text"
      }
    }
  }
}